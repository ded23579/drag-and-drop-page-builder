<!DOCTYPE html>
<html>
<head>
    <title>Test GrapesJS Loading</title>
</head>
<body>
    <h1>GrapesJS CDN Load Test</h1>
    <div id="test-output"></div>

    <script>
        const output = document.getElementById('test-output');
        
        async function test() {
            try {
                // Test 1: Load main library
                output.innerHTML += '<p>Loading grapesjs...</p>';
                const script1 = document.createElement('script');
                script1.src = 'https://unpkg.com/grapesjs@latest/dist/grapes.min.js';
                script1.async = false;
                await new Promise((resolve, reject) => {
                    script1.onload = resolve;
                    script1.onerror = reject;
                    document.head.appendChild(script1);
                });
                output.innerHTML += '<p style="color: green;">✓ GrapesJS loaded</p>';
                
                // Test 2: Check if grapesjs is defined
                if (typeof grapesjs !== 'undefined') {
                    output.innerHTML += '<p style="color: green;">✓ grapesjs object found</p>';
                } else {
                    output.innerHTML += '<p style="color: red;">✗ grapesjs object NOT found</p>';
                }
                
                // Test 3: Load preset-webpage
                output.innerHTML += '<p>Loading grapesjs-preset-webpage...</p>';
                const script2 = document.createElement('script');
                script2.src = 'https://unpkg.com/grapesjs-preset-webpage@latest/dist/grapesjs-preset-webpage.js';
                script2.async = false;
                await new Promise((resolve, reject) => {
                    script2.onload = resolve;
                    script2.onerror = reject;
                    document.head.appendChild(script2);
                });
                output.innerHTML += '<p style="color: green;">✓ preset-webpage loaded</p>';
                
                // Test 4: Initialize editor
                output.innerHTML += '<p>Initializing editor...</p>';
                const editor = grapesjs.init({
                    container: '#test-editor',
                    fromElement: false,
                    height: '400px',
                    width: '100%',
                    plugins: ['gjs-preset-webpage'],
                    pluginsOpts: {
                        'gjs-preset-webpage': {}
                    }
                });
                output.innerHTML += '<p style="color: green;">✓ Editor initialized!</p>';
                
            } catch (err) {
                output.innerHTML += '<p style="color: red;">✗ Error: ' + err.message + '</p>';
            }
        }
        
        // Add CSS
        const style = document.createElement('style');
        style.textContent = `
            body { font-family: Arial; margin: 20px; }
            #test-output { margin: 20px 0; }
            p { margin: 10px 0; }
            #test-editor { margin: 20px 0; border: 1px solid #ccc; }
        `;
        document.head.appendChild(style);
        
        // Add editor container
        const container = document.createElement('div');
        container.id = 'test-editor';
        document.body.appendChild(container);
        
        // Run test
        test();
    </script>
</body>
</html>
